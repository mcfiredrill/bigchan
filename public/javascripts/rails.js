/**
 * Unobtrusive scripting adapter for jQuery
 *
 * Requires jQuery 1.4.3 or later.
 * https://github.com/rails/jquery-ujs
 */
(function(c){function j(a){var b=c('meta[name="csrf-token"]').attr("content");b&&a(function(d){d.setRequestHeader("X-CSRF-Token",b)})}function k(a,b,d){b=new c.Event(b);a.trigger(b,d);return b.result!==false}function l(a){var b,d,g,o=a.attr("data-type")||c.ajaxSettings&&c.ajaxSettings.dataType;if(a.is("form")){b=a.attr("method");d=a.attr("action");g=a.serializeArray();var m=a.data("ujs:submit-button");if(m){g.push(m);a.data("ujs:submit-button",null)}}else{b=a.attr("data-method");d=a.attr("href");
g=null}c.ajax({url:d,type:b||"GET",data:g,dataType:o,beforeSend:function(f,e){e.dataType===undefined&&f.setRequestHeader("accept","*/*;q=0.5, "+e.accepts.script);return k(a,"ajax:beforeSend",[f,e])},success:function(f,e,h){a.trigger("ajax:success",[f,e,h])},complete:function(f,e){a.trigger("ajax:complete",[f,e])},error:function(f,e,h){a.trigger("ajax:error",[f,e,h])}})}function n(a){a.find("input[data-disable-with]").each(function(){var b=c(this);b.data("ujs:enable-with",b.val()).val(b.attr("data-disable-with")).attr("disabled",
"disabled")})}function p(a){a.find("input[data-disable-with]").each(function(){var b=c(this);b.val(b.data("ujs:enable-with")).removeAttr("disabled")})}function i(a){var b=a.attr("data-confirm");return!b||k(a,"confirm")&&confirm(b)}function q(a){var b=false;a.find("input[name][required]").each(function(){c(this).val()||(b=true)});return b}if(c().jquery=="1.5"){var r=c.ajaxSettings.xhr;c.ajaxSettings.xhr=function(){var a=r();j(function(b){var d=a.open;a.open=function(){d.apply(this,arguments);b(this)}});
return a}}else c(document).ajaxSend(function(a,b){j(function(d){d(b)})});c("a[data-confirm], a[data-method], a[data-remote]").live("click.rails",function(){var a=c(this);if(!i(a))return false;if(a.attr("data-remote")!=undefined){l(a);return false}else if(a.attr("data-method")){var b=a.attr("href"),d=a.attr("data-method");a=c("meta[name=csrf-token]").attr("content");var g=c("meta[name=csrf-param]").attr("content");b=c('<form method="post" action="'+b+'"></form>');d='<input name="_method" value="'+
d+'" type="hidden" />';if(g!==undefined&&a!==undefined)d+='<input name="'+g+'" value="'+a+'" type="hidden" />';b.hide().append(d).appendTo("body");b.submit();return false}});c("form").live("submit.rails",function(){var a=c(this),b=a.attr("data-remote")!=undefined;if(!i(a))return false;if(q(a))return!b;if(b){l(a);return false}else setTimeout(function(){n(a)},13)});c("form input[type=submit], form button[type=submit], form button:not([type])").live("click.rails",function(){var a=c(this);if(!i(a))return false;
var b=a.attr("name");b=b?{name:b,value:a.val()}:null;a.closest("form").data("ujs:submit-button",b)});c("form").live("ajax:beforeSend.rails",function(a){this==a.target&&n(c(this))});c("form").live("ajax:complete.rails",function(a){this==a.target&&p(c(this))})})(jQuery);
